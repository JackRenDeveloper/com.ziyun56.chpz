var include_js_mapping =
// include_js_mapping_start
{
	"dvs" : [ '<script src="${basePath}static/js/jquery_json/jquery.json.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/jquery/jquery.cookie.js" type="text/javascript"></script>',
			'<link href="${basePath}static/css/dvs.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/css/skin-light-blue.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/css/dvs.2.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/dvs.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/dvs.2.js" type="text/javascript"></script>' ],

	"AdminLTE" : [ '<link href="${basePath}static/js/AdminLTE/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/AdminLTE/others/font-awesome.min.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/AdminLTE/others/ionicons.min.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/AdminLTE/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/AdminLTE/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />', '<!--[if lt IE 9]>',
			'<script src="${basePath}static/js/AdminLTE/others/html5shiv.min.js"></script>',
			'<script src="${basePath}static/js/AdminLTE/others/respond.min.js"></script>', '<![endif]-->',
			'<script src="${basePath}static/js/AdminLTE/plugins/jQuery/jQuery-2.1.4.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/AdminLTE/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/AdminLTE/dist/js/app.min.js" type="text/javascript"></script>' ],

	"jquery_mobile" : [ '<link href="${basePath}static/js/jquery_mobile/jquery.mobile-1.4.5.min.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/jquery/jquery-1.12.1.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/jquery_mobile/jquery.mobile-1.4.5.min.js" type="text/javascript"></script>' ],

	"jqGrid" : [ '<link href="${basePath}static/js/jqGrid/css/jquery-ui.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/jqGrid/css/trirand/ui.jqgrid.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/jqGrid/js/trirand/jquery.jqGrid.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/jqGrid/js/trirand/i18n/grid.locale-cn.js" type="text/javascript"></script>' ],

	"mmgrid" : [ '<link href="${basePath}static/js/mmgrid/mmGrid.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/mmgrid/mmPaginator.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/mmgrid/mmGrid.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/mmgrid/mmPaginator.js" type="text/javascript"></script>' ],

	"ztree" : [ '<link href="${basePath}static/js/ztree/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/ztree/jquery.ztree.all.min.js" type="text/javascript"></script>' ],

	"highcharts" : [ '<script src="${basePath}static/js/highcharts/js/highcharts.src.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/highcharts/js/modules/exporting.src.js" type="text/javascript"></script>' ],

	"validation" : [ '<script src="${basePath}static/js/validation/jquery.validate.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/validation/additional-methods.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/validation/localization/messages_zh.js" type="text/javascript"></script>',
			'<link href="${basePath}static/js/validation/jquery.validate.custom.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/validation/jquery.validate.custom.js" type="text/javascript"></script>',
			'<link href="${basePath}static/js/qtip/jquery.qtip.min.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/qtip/jquery.qtip.min.js" type="text/javascript"></script>' ],

	"sugar" : [ '<script src="${basePath}static/js/sugar/sugar-full.dev.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/sugar/sugar.min.js" type="text/javascript"></script>' ],

	"vue" : [ '<script src="${basePath}static/js/vue/vue.min.js" type="text/javascript"></script>',
	         '<script src="${basePath}static/js/vue/vue-resource.js" type="text/javascript"></script>'],
			
	"arttemplate" : [ '<script src="${basePath}static/js/arttemplate/template.js" type="text/javascript"></script>' ],

	"WdatePicker" : [ '<script src="${basePath}static/js/my97datepicker/WdatePicker.js" type="text/javascript"></script>' ],

	"datetimepicker" : [ '<link href="${basePath}static/js/datetimepicker/jquery.datetimepicker.min.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/datetimepicker/jquery.datetimepicker.full.min.js" type="text/javascript"></script>' ],

	"webuploader" : [ '<link href="${basePath}static/js/webuploader/webuploader.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/webuploader/webuploader.min.js" type="text/javascript"></script>' ],

	"ueditor" : [ '<script src="${basePath}static/js/ueditor/ueditor.config.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/ueditor/ueditor.all.min.js" type="text/javascript"></script>' ],

	"simplepagination" : [ '<link href="${basePath}static/js/simplepagination/simplePagination.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/simplepagination/jquery.simplePagination.js" type="text/javascript"></script>' ],

	"fullcalendar" : [ '<link href="${basePath}static/js/fullcalendar/fullcalendar.min.css" rel="stylesheet" type="text/css" />',
			'<link href="${basePath}static/js/fullcalendar/fullcalendar.print.css" rel="stylesheet" media="print" type="text/css" />',
			'<script src="${basePath}static/js/fullcalendar/lib/moment.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/fullcalendar/lang-all.js" type="text/javascript"></script>' ],

	"moment" : [ '<script src="${basePath}static/js/moment/moment.min.js" type="text/javascript"></script>' ],

	"recordrtc" : [ '<script src="${basePath}static/js/recordrtc/gif-recorder.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/recordrtc/gumadapter.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/recordrtc/RecordRTC.min.js" type="text/javascript"></script>' ],

	"perfectscrollbar" : [ '<link href="${basePath}static/js/perfectscrollbar/css/perfect-scrollbar.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/perfectscrollbar/js/perfect-scrollbar.jquery.js" type="text/javascript"></script>' ],

	"citypicker" : [ '<link href="${basePath}static/js/citypicker/css/city-picker.css" rel="stylesheet" type="text/css" />',
			'<script src="${basePath}static/js/citypicker/js/city-picker.data.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/citypicker/js/city-picker.data.custom.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/citypicker/js/city-picker.js" type="text/javascript"></script>' ],

	"jquery" : [ '<script src="${basePath}static/js/jquery/jquery-1.12.1.min.js" type="text/javascript"></script>' ],

	"jquery1" : [ '<script src="${basePath}static/js/jquery/jquery-1.11.1.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/jquery/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>' ],

	"jquery_json" : [ '<script src="${basePath}static/js/jquery_json/jquery.json.min.js" type="text/javascript"></script>' ],

	"cookie" : [ '<script src="${basePath}static/js/cookie/js.cookie.js" type="text/javascript"></script>' ],

	"autocomplete" : [ '<script src="${basePath}static/js/autocomplete/jquery.autocomplete.js" type="text/javascript"></script>' ],

	"jbox" : [ '<link href="${basePath}static/js/jbox/jBox.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jbox/themes/ModalBorder.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jbox/themes/NoticeBorder.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jbox/themes/TooltipBorder.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jbox/themes/TooltipDark.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jbox/jBox.custom.css" rel="stylesheet" type="text/css"/>',
			'<script src="${basePath}static/js/jbox/jBox.js" type="text/javascript"></script>' ],

	"baidumap" : [ '<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=uGOSlU2jI4EaUhRQDEumTQ6gHMw3ZdsR&s=1"></script>',
			'<script type="text/javascript" src="https://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>',
			'<link rel="stylesheet" href="https://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css" />',
			'<script type="text/javascript" src="https://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>',
			'<script type="text/javascript" src="https://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>',
			'<script type="text/javascript" src="https://developer.baidu.com/map/jsdemo/demo/convertor.js"></script>',
			'<script type="text/javascript" src="https://api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js"></script>',
			'<script type="text/javascript" src="${basePath}static/js/baidumap/bdmap.js"></script>' ],

	"lwzh" : [ '<link href="${basePath}static/css/lwzh.css" rel="stylesheet" type="text/css"/>',
			'<script src="${basePath}static/js/lwzh.js" type="text/javascript"></script>' ],

	"jquery_ui" : [ '<link href="${basePath}static/js/jquery_ui/jquery-ui.min.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jquery_ui/jquery-ui.theme.min.css" rel="stylesheet" type="text/css"/>',
			'<script src="${basePath}static/js/jquery_ui/jquery-ui.min.js" type="text/javascript"></script>' ],

	"bootstrap" : [ '<!--[if lt IE 9]>', '<script src="${basePath}static/js/html5shiv/html5shiv.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/respond/respond.src.js" type="text/javascript"></script>', '<![endif]-->',
			'<link href="${basePath}static/js/bootstrap/lengliancss/lenglian.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/bootstrap/css/bootstrap-theme.css" rel="stylesheet" type="text/css"/>',
			'<script src="${basePath}static/js/bootstrap/js/bootstrap.js" type="text/javascript"></script>',
			'<link href="${basePath}static/AdminLTE/others/font-awesome.min.css" rel="stylesheet" type="text/css"/>' ],

	"qrcode" : [ '<script src="${basePath}static/js/qrcode/qrcode.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/qrcode/qrcode_UTF8.js" type="text/javascript"></script>' ],

	"echarts" : [ '<script src="${basePath}static/js/echarts/source/echarts.js" type="text/javascript"></script>' ],

	"echartsx" : [ '<script src="${basePath}static/js/echartsx/source/echarts-x.js" type="text/javascript"></script>' ],

	"sortable" : [ '<script src="${basePath}static/js/sortable/jquery-sortable.js" type="text/javascript"></script>' ],

	"leaflet" : [ '<link href="${basePath}static/js/leaflet/leaflet.css" rel="stylesheet" type="text/css"/>',
			'<script src="${basePath}static/js/leaflet/leaflet.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/leaflet/leaflet.easyPrint.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/leaflet/leaflet-image.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/leaflet/leaflet.exportImage.js" type="text/javascript"></script>' ],

	"cascading" : [ '<link href="${basePath}static/js/jquery_cascading/css/shCore.css" rel="stylesheet" type="text/css"/>',
			'<link href="${basePath}static/js/jquery_cascading/css/shThemeDefault.css" rel="stylesheet" type="text/css"/>',
			'<script src="${basePath}static/js/jquery_cascading/js/jquery.cascadingdropdown.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/jquery_cascading/js/jquery.mockjax.min.js" type="text/javascript"></script>',
			'<script src="${basePath}static/js/jquery_cascading/js/knockout-min.js" type="text/javascript"></script>', ],

	"jszip" : [ '<script src="${basePath}static/js/jszip/jszip.min.js" type="text/javascript"></script>' ],

	"html2canvas" : [ '<script src="${basePath}static/js/html2canvas/html2canvas.js" type="text/javascript"></script>' ],

	"jspdf" : [ '<script src="${basePath}static/js/jspdf/jspdf.debug.js" type="text/javascript"></script>' ],

	"jQuery" : [ '<script src="${basePath}static/js/jquery.min.js" type="text/javascript"></script>' ],

	"" : []
};
// include_js_mapping_end

if (!Array.indexOf) {
	Array.prototype.indexOf = function(item) {
		for (var i = 0; i < this.length; i++) {
			if (this[i] == item) {
				return i;
			}
		}
		return -1;
	}
}

if (!Array.lastIndexOf) {
	Array.prototype.lastIndexOf = function(item) {
		for (var i = this.length; i >= 0; i--) {
			if (this[i] == item) {
				return this.length - i;
			}
		}
		return -1;
	}
}

var dvs = dvs || {};

dvs.includeCssJs = function(basePath, groups) {
	var ss = [];
	for (var i = 0; i < groups.length; i++) {
		var g = groups[i];
		if (!dvs.includeCssJsList) {
			dvs.includeCssJsList = [];
		}
		if (dvs.includeCssJsList.indexOf(g) == -1) {
			dvs.includeCssJsList.push(g);
		} else {
			// continue;
		}

		if (g.indexOf(".css") > 0) {
			ss.push('<link href="' + basePath + g + '" rel="stylesheet" type="text/css" />');
		} else if (g.indexOf(".js") > 0) {
			ss.push('<script src="' + basePath + g + '" type="text/javascript"></script>');
		} else {
			dvs.includeCssJsGroup(basePath, g, ss);
		}
	}
	document.write(ss.join(""));
};

dvs.includeCssJsGroup = function(basePath, g, ss) {
	var jsArray = include_js_mapping[g];
	if (jsArray && jsArray.length > 0) {
		for (var i = 0; i < jsArray.length; i++) {
			var js = jsArray[i];
			js = js.replace(/\${basePath}/g, basePath);
			ss.push(js);
		}
	} else {
		alert("dvs.includeCssJsGroup fail : " + g);
	}
};

(function() {
	var href = document.location.href;
	var search = document.location.search;
	var scripts = document.getElementsByTagName("script");
	for (var i = 0; i < scripts.length; i++) {
		var script = scripts[i];
		var basePath = "";
		var groups = [];
		var pos = script.src.indexOf("/static/js/include.js");
		if (pos != -1) {
			var contextPath = href.substring(0, pos);// http://localhost/contextPath
			var p = contextPath.indexOf("/", 8);
			if (p == -1) {
				dvs.contextPath = "";
			} else {
				dvs.contextPath = contextPath.substring(p);
			}

			var path = href.substring(pos + 1, href.lastIndexOf(search));
			var ss = path.split("/");
			var n = ss.length - 1;
			var j = 0;
			while (j < n) {
				basePath += "../";
				j++;
			}
			groups = script.src.substring(pos + 22).split(",");
		}

		if (groups.length > 0) {
			dvs.includeCssJs(basePath, groups);
		}
	}
})();
